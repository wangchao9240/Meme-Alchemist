# Meme Alchemist - TODO

## ✅ 已完成

- [x] 项目架构设计
- [x] PRD 文档
- [x] 前端项目结构搭建
- [x] 后端项目结构搭建
- [x] 共享类型和 Schemas
- [x] 基础路由（mock 数据）
- [x] 基础组件框架
- [x] API Client 封装

## 🚧 进行中

### 后端核心功能

- [ ] **Supabase 集成**

  - [ ] 创建数据库表（facts, trends\_\*, drafts, assets）
  - [ ] 配置 RLS 策略
  - [ ] 创建 Storage bucket
  - [ ] 实现 Drizzle ORM schemas

- [ ] **热榜功能**

  - [ ] 实现热榜抓取器（微博/知乎）
  - [ ] 实现聚类算法（Jaccard 相似度）
  - [ ] 实现定时任务（Cron）
  - [ ] 缓存优化

- [ ] **JIT 取材**

  - [ ] 实现 facts 表查询
  - [ ] 实现 tags 过滤
  - [ ] 实现排序（level + confidence）

- [ ] **LLM 生成**

  - [ ] 集成 OpenAI API
  - [ ] 集成 Doubao API（可选）
  - [ ] 实现降级策略
  - [ ] 实现模板化文案兜底

- [ ] **图片渲染**
  - [ ] 集成 Satori
  - [ ] 集成 Sharp (WASM)
  - [ ] 实现模板系统
  - [ ] 实现字体加载
  - [ ] 上传到 Supabase Storage

### 前端功能

- [ ] **Try Live 页面完善**

  - [ ] 完善 TrendSelector（真实数据）
  - [ ] 完善 FactPicker（真实数据）
  - [ ] 完善 TemplateGrid（模板预览）
  - [ ] 完善 MemeViewer（下载功能）

- [ ] **UI/UX 优化**

  - [ ] 添加 Loading 状态
  - [ ] 添加 Error 处理
  - [ ] 添加 Toast 通知
  - [ ] 移动端适配优化
  - [ ] 暗色模式支持

- [ ] **性能优化**
  - [ ] 图片懒加载
  - [ ] SWR 缓存配置
  - [ ] Code splitting
  - [ ] PWA 支持

### 基础设施

- [ ] **部署配置**

  - [ ] 配置 Cloudflare Pages
  - [ ] 配置 Cloudflare Workers
  - [ ] 配置 KV Namespace
  - [ ] 设置环境变量和 Secrets

- [ ] **数据库**

  - [ ] 运行数据库迁移
  - [ ] 添加种子数据（10+ facts）
  - [ ] 配置索引

- [ ] **监控与日志**
  - [ ] 配置 Cloudflare Analytics
  - [ ] 添加错误日志
  - [ ] 添加性能监控

## 📋 待办事项

### 核心功能

- [ ] 实现 6 个模板
- [ ] 实现证据链接展示
- [ ] 实现文案复制功能
- [ ] 实现多比例下载

### 可选功能

- [ ] 管理后台（/admin）
- [ ] 手动触发热榜更新
- [ ] Facts 管理界面
- [ ] 生成历史记录

### 测试

- [ ] 单元测试（Vitest）
- [ ] E2E 测试（Playwright）
- [ ] 性能测试
- [ ] 兼容性测试

### 文档

- [ ] API 文档
- [ ] 组件文档
- [ ] 部署指南
- [ ] 演示视频/截图

### 优化

- [ ] SEO 优化
- [ ] 图片优化
- [ ] 字体优化
- [ ] 缓存策略优化

## 🎯 MVP 验收清单

- [ ] 5 个不同话题的作品展示
- [ ] 每张图的事实卡都能点击跳转到真实来源
- [ ] 移动端 Lighthouse 性能分数 >85
- [ ] 从选话题到下载图片全流程 <30 秒
- [ ] README 包含二维码 + 演示截图/视频

## 🐛 已知问题

- [ ] 前端 API 调用需要真实后端数据
- [ ] 模板渲染功能未实现
- [ ] 限流功能需要测试
- [ ] Cron 任务需要实现

## 💡 改进想法

- [ ] 添加 A/B 测试
- [ ] 添加分享功能
- [ ] 添加收藏功能
- [ ] 支持短视频脚本导出
- [ ] 多语言支持

---

**最后更新**: 2025-01-10
