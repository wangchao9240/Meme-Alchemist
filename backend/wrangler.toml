name = "meme-alchemist-api"
main = "src/index.ts"
compatibility_date = "2025-01-10"
compatibility_flags = ["nodejs_compat"]

# Workers.dev subdomain
workers_dev = true

# KV Namespaces
# Created via: wrangler kv:namespace create CACHE
[[kv_namespaces]]
binding = "CACHE"
id = "ce6e9d39dee2414e81046e366a49c4b9"
preview_id = "7bc1199d51514f0092c1de8600498ac3"

# Workers AI
[ai]
binding = "AI"

# Cron Triggers
[triggers]
crons = ["0 23 * * *"]  # Daily at 23:00 UTC (09:00 AEST)

# Environment Variables (public)
[vars]
ENVIRONMENT = "production"

# Secrets (set via: wrangler secret put SECRET_NAME)
# - SUPABASE_URL
# - SUPABASE_SERVICE_KEY
# - OPENAI_API_KEY
# - ADMIN_KEY
# - WHITE_LISTED_DOMAINS

# Build configuration
[build]
command = "npm run build"

# Development
[dev]
port = 8787

